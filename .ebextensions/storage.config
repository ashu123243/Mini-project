# .ebextensions/storage.config

Resources:
  AWSEBAutoScalingGroup:
    Metadata:
      AWS::CloudFormation::Init:
        commands:
          01_resize_root_volume:
            command: |
              #!/bin/bash
              set -e
              DEVICE=$(lsblk -o NAME,MOUNTPOINT | grep ' /$' | awk '{print $1}')
              echo "Resizing root volume on device: $DEVICE"
              sudo growpart /dev/${DEVICE%?} ${DEVICE: -1} || true
              sudo resize2fs /dev/${DEVICE}

# .ebextensions/storage.config

# .ebextensions/storage.config

option_settings:
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.medium       # Upgrade EC2 instance type
    RootVolumeSize: 30            # Increase disk size to 30 GB
    RootVolumeType: gp3           # General Purpose SSD
  aws:elasticbeanstalk:application:environment:
    INSTANCE_STORAGE: "expanded"


